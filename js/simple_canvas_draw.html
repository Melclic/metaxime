<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <script src="pkgs/d3.v3.min.js"></script>
  <script src="pkgs/smiles-drawer.js"></script>
</head>
<body>
  <canvas id="example-canvas" width="100" height="100"></canvas>
  <script>
	var cmp_width = 100;
	var cmp_height = 100;

	var cas = d3.select("body")
	  .append("foreignObject")
		.attr('width', cmp_width)
		.attr('height', cmp_height)
		.attr('id', 'test')
		.append('xhtml:canvas')
		  //.attr('xmlns', 'http://www.w3.org/1999/xhtml');

	var elements = document.getElementsByTagName('foreignObject');
	for (var i=0; i<elements.length; i++) {
	  console.log(elements[i].id)
	  makeStrc('[H]OC(=O)C([H])=C([H])C([H])=C([H])C(=O)O[H]', document.querySelector('#'+elements[i].id+' canvas'), 100, 100);
	}

  //cas.attr("width", width).attr("height", height)

  function makeStrc(input, canvas, width, height) {
    smilesDrawer = new SmilesDrawer.Drawer({ width: width, height: height });
    SmilesDrawer.parse(input, function(tree) {
          // Draw to the canvas
          smilesDrawer.draw(tree, canvas, "light", false);
          // Alternatively, draw to SVG:
          //svgDrawer.draw(tree, canvas, 'dark', false);
        });
  }
  </script>
</body>
