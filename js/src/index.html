<!doctype html>
<html>
<meta charset='utf-8'>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <!--                                           -->
  <title>JSME test page</title>

  <script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>
  <script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js'></script>
  <script type="text/javascript" language="javascript" src="js/jsme/jsme.nocache.js"></script>
  <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js'></script>
  <link href='css/bootstrap/bootstrap.min.css' rel='stylesheet' type='text/css'/>
  <script>
        //this function will be called after the JavaScriptApplet code has been loaded.
        function jsmeOnLoad() {
          //Instantiate a new JSME:
          //arguments: HTML id, width, height (must be string not number!)
          jsmeApplet = new JSApplet.JSME("appletContainer", "600px", "440px", {
                  //optional parameters
                  "options": "query,hydrogens,fullScreenIcon"
                  //"jme": startingStructure // JME mol format
          });
          //Opera patch: if some applet elements are not displayed, force repaint
          //jsmeApplet.deferredRepaint(); //the applet will be repainted after the browser event loop returns
          //it is recommended to use it if the JSME is created outside this jsmeOnLoad() function

          //jsmeApplet has the same API as the original Java applet
          //One can mimic the JME Java applet access to simplify the adaptation of HTML and JavaScript code:
          document.JME = jsmeApplet;

          //suggestion
          //all buttons that access the jsme variable were disabled in the html
          //Now enable all buttons that can access the jsme variable since the applet is ready
          //example:
          //document.getElementById("button").disabled=false;

          //document.getElementById("inchiKeyUrlTextArea").value = jsmeApplet.getWebSearchInchiKeyBaseUrl();
        }

        function getSmiles() {
          var data = document.JME.smiles();
          document.getElementById("jme_output").value = data;
        }

        function readAnyFromTextArea() {
          var mol = document.getElementById("jme_output").value;
          jsmeApplet.readGenericMolecularInput(mol);
        }

  </script>
</head>
<style id='css'>
  .col-centered{
          margin: 0 auto;
          float: none;
  }
</style>
<body>
  <!-- RECOMMENDED if your web app will not function without JavaScript enabled -->
  <noscript>
          <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
                  Your web browser must have JavaScript enabled
                  in order for this application to display correctly.
          </div>
  </noscript>
  <!-- The input field -->
  <form>
    <div class="form-group">
      <label for="smiles_btn">Input or draw the SMILES of the desired product</label>
      <input type="text" class="form-control" id='jme_output'></input>
      <span class="input-group-btn" id='smiles_btn'>
	<button class="btn btn-default" type="button" onclick='readAnyFromTextArea();'>Draw SMILES</button>
	<button class='btn btn-default' type="button" onclick='getSmiles();'>Get SMILES</button>
      </span>
      <!-- The JSME drawer-->
      <table align="center">
	<tr>
	  <td id="appletContainer"></td>
	</tr>
      </table>

      <script>
	    //The event handler for pressing enter on the SMILES text box
	    var input = document.getElementById('jme_output');
	    input.addEventListener("keyup", function(event) {
	      if (event.keyCode === 13) {
		    event.preventDefault();
		    readAnyFromTextArea();
	      }
	    });
      </script>
    </div>
    <div class="form-group">
      <label for="organism_list">Orgnism: </label>
      <select class="form-control" id='organism_list'>
	<option>e_coli_iML1515</option>
	<option>e_coli_iJO1366</option>
	<option>e_coli_iJR904</option>
	<option>e_coli_iAF1260</option>
	<option>e_coli_core_model</option>
	<option>s_cerevisiae_iMM904</option>
	<option>s_cerevisiae_iND750</option>
	<option>y_lipolytica_iMK735</option>
	<option>p_putida_iJN746</option>
	<option>b_subtilis_iYO844</option>
      </select>
    </div>
    <div class="form-group">
      <label for="steps_list">Number of steps: </label>
      <select class="form-control" id='steps_list'>
	<option>1</option>
	<option>2</option>
	<option selected>3</option>
	<option>4</option>
	<option>5</option>
      </select>
    </div>
    <div class="form-group">
      <button class="btn btn-default" type="button">Predict Pathways</button>
    </div>
  </form>
</body>
</html>
