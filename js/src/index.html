<!doctype html>
<html>
<meta charset='utf-8'>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <!--                                           -->
  <title>JSME test page</title>

  <script type="text/javascript" language="javascript" src="js/jsme/jsme.nocache.js"></script>
  <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js'></script>
  <link href='css/bootstrap/bootstrap.min.css' rel='stylesheet' type='text/css'/>
  <script>
	//this function will be called after the JavaScriptApplet code has been loaded.
	function jsmeOnLoad() {
	  //Instantiate a new JSME:
	  //arguments: HTML id, width, height (must be string not number!)
	  jsmeApplet = new JSApplet.JSME("appletContainer", "600px", "440px", {
		  //optional parameters
		  "options": "query,hydrogens,fullScreenIcon"
		  //"jme": startingStructure // JME mol format
	  });
	  //Opera patch: if some applet elements are not displayed, force repaint
	  //jsmeApplet.deferredRepaint(); //the applet will be repainted after the browser event loop returns
	  //it is recommended to use it if the JSME is created outside this jsmeOnLoad() function

	  //jsmeApplet has the same API as the original Java applet
	  //One can mimic the JME Java applet access to simplify the adaptation of HTML and JavaScript code:
	  document.JME = jsmeApplet;

	  //suggestion
	  //all buttons that access the jsme variable were disabled in the html
	  //Now enable all buttons that can access the jsme variable since the applet is ready
	  //example:
	  //document.getElementById("button").disabled=false;

	  //document.getElementById("inchiKeyUrlTextArea").value = jsmeApplet.getWebSearchInchiKeyBaseUrl();
	}

	function getSmiles() {
	  var data = document.JME.smiles();
	  document.getElementById("jme_output").value = data;
	}

	function readAnyFromTextArea() {
	  var mol = document.getElementById("jme_output").value;
	  jsmeApplet.readGenericMolecularInput(mol);
	}

  </script>
</head>
<style id='css'>
  .col-centered{
	  margin: 0 auto;
	  float: none;
  }
</style>
<body>
  <!-- RECOMMENDED if your web app will not function without JavaScript enabled -->
  <noscript>
	  <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
		  Your web browser must have JavaScript enabled
		  in order for this application to display correctly.
	  </div>
  </noscript>
  <!-- The input field -->
  <div class="row p-3">
	  <div class="col-centered col-12 col-md-8">
		  <div class="input-group">
			  <div class="form-row col-md-6">
				<input type="text" class="form-control" rows='3' id='jme_output'></input>
			  </div>
			  <span class="input-group-btn">
				<button class="btn btn-default" type="button" onclick='readAnyFromTextArea();'>Draw SMILES</button>
				<button class='btn btn-default' type="button" onclick='getSmiles();'>Get SMILES</button>
			  </span>
		  </div>
	  </div>
  </div>
  <!-- The JSME drawer-->
  <table align="center">
	  <tr>
		  <td id="appletContainer"></td>
	  </tr>
	  </tr>
  </table>

  <script>
	//The event handler for pressing enter on the SMILES text box
	var input = document.getElementById('jme_output');
	input.addEventListener("keyup", function(event) {
	  if (event.keyCode === 13) {
		event.preventDefault();
		readAnyFromTextArea();
	  }
	});
  </script>
</body>
</html>
