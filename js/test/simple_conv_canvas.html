<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <script src="pkgs/d3.v6.js"></script>
  <script src="pkgs/smiles-drawer.js"></script>
  <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Smiles Drawer Example</title>
    <meta name="description" content="A minimal smiles drawer example." />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700"
      rel="stylesheet"
    />
</head>
<body>
  <script>
    var cmp_width = 100;
    var cmp_height = 100;

    var ctx = new C2S(500,500);
	console.log(ctx)
    ctx.fillStyle="red";
    ctx.fillRect(100,100,100,100);
    var myRectangle = ctx.getSerializedSvg(true);
    var cas = d3.select("body").append('div').html(myRectangle)


	/*
    canvas_static = document.getElementById('example-canvas')
    console.log(canvas_static)
    console.log(isElement(canvas_static))
    ctx_static = canvas_static.getContext('2d')
    console.log(ctx_static)
    console.log(isElement(ctx_static))
    makeStrc('[H]OC(=O)C([H])=C([H])C([H])=C([H])C(=O)O[H]', canvas_static, cmp_width, cmp_height);
	*/


    console.log('#####################')


    var ctx_cmp = new C2S(500,500);
	ctx_cmp.id = 'c2s_id'
    console.log(ctx_cmp)
    console.log(isElement(ctx_cmp))
    console.log(ctx_cmp.id)
    makeStrc('[H]OC(=O)C([H])=C([H])C([H])=C([H])C(=O)O[H]', ctx_cmp, 500, 500);    
    var svg_ctx = ctx_cmp.getSerializedSvg(true);
    console.log(svg_ctx)
    var cas = d3.select("body").append('div').html(svg_ctx)
    console.log(cas)


    console.log('#####################')

    //Returns true if it is a DOM element    
    function isElement(o){
      return (
	typeof HTMLElement === "object" ? o instanceof HTMLElement : //DOM2
	o && typeof o === "object" && o !== null && o.nodeType === 1 && typeof o.nodeName==="string"
    );
    }


    function makeStrc(input, canvas, width, height) {
      smilesDrawer = new SmilesDrawer.Drawer({ width: width, height: height });
	  console.log('>>>>')
	  console.log(smilesDrawer)
      SmilesDrawer.parse(input, function(tree) {
	    // Draw to the canvas
	    smilesDrawer.draw(tree, canvas, "light", false);
	    // Alternatively, draw to SVG:
	    //svgDrawer.draw(tree, canvas, 'dark', false);
	  });
    }

    function makeSVGstrc(input, in_html_element, in_width, in_height) {
      svgDrawer = new SmilesDrawer.SvgDrawer({ width: in_width, height: in_height });
	  console.log(svgDrawer)
      SmilesDrawer.parse(input, function(tree) {
	    // draw to the canvas
	    //smilesdrawer.draw(tree, in_canvas, "light", false);
	    // alternatively, draw to svg:
	    svgDrawer.draw(tree, in_html_element, 'dark', false);
	  });
    }
  </script>
</body>
